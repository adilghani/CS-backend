{"version":3,"file":"upload.js","names":["storage","GridFsStorage","url","process","env","DB_URL","options","useNewUrlParser","useUnifiedTopology","file","req","match","indexOf","mimetype","filename","Date","now","originalname","bucketName"],"sources":["../../../src/utils/helpers/upload.js"],"sourcesContent":["import multer from \"multer\";\r\nimport GridFsStorage from \"multer-gridfs-storage\";\r\n\r\nconst storage = new GridFsStorage({\r\n    url: process.env.DB_URL,\r\n    options: { useNewUrlParser: true, useUnifiedTopology: true },\r\n    file: (req, file) => {\r\n        const match = [\"image/png\", \"image/jpeg\"];\r\n\r\n        if (match.indexOf(file.mimetype) === -1) {\r\n            const filename = `${Date.now()}-any-name-${file.originalname}`;\r\n            return filename;\r\n        }\r\n\r\n        return {\r\n            bucketName: \"photos\",\r\n            filename: `${Date.now()}-any-name-${file.originalname}`,\r\n        };\r\n    },\r\n});\r\n\r\nexport default storage;\r\n"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,OAAO,GAAG,IAAIC,4BAAJ,CAAkB;EAC9BC,GAAG,EAAEC,OAAO,CAACC,GAAR,CAAYC,MADa;EAE9BC,OAAO,EAAE;IAAEC,eAAe,EAAE,IAAnB;IAAyBC,kBAAkB,EAAE;EAA7C,CAFqB;EAG9BC,IAAI,EAAE,CAACC,GAAD,EAAMD,IAAN,KAAe;IACjB,MAAME,KAAK,GAAG,CAAC,WAAD,EAAc,YAAd,CAAd;;IAEA,IAAIA,KAAK,CAACC,OAAN,CAAcH,IAAI,CAACI,QAAnB,MAAiC,CAAC,CAAtC,EAAyC;MACrC,MAAMC,QAAQ,GAAI,GAAEC,IAAI,CAACC,GAAL,EAAW,aAAYP,IAAI,CAACQ,YAAa,EAA7D;MACA,OAAOH,QAAP;IACH;;IAED,OAAO;MACHI,UAAU,EAAE,QADT;MAEHJ,QAAQ,EAAG,GAAEC,IAAI,CAACC,GAAL,EAAW,aAAYP,IAAI,CAACQ,YAAa;IAFnD,CAAP;EAIH;AAf6B,CAAlB,CAAhB;eAkBejB,O"}