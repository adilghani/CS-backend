{"version":3,"sources":["../../src/routes/middleware.js"],"names":["CryptoJS","require","secretKey","userAuth","req","res","next","header","setHeader","console","log","JSON","stringify","authApiKey","bytes","AES","decrypt","decryptedData","toString","enc","Utf8","status","json","message"],"mappings":";;;;;;;AAAA,IAAIA,QAAQ,GAAGC,OAAO,CAAC,WAAD,CAAtB;;AACA,MAAMC,SAAS,GAAC,0CAAhB,C,CAEA;AAEA;;AAEO,SAASC,QAAT,CAAkBC,GAAlB,EAAuBC,GAAvB,EAA4BC,IAA5B,EAAkC;AACrCD,EAAAA,GAAG,CAACE,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAF,EAAAA,GAAG,CAACG,SAAJ,CAAc,8BAAd,EAA8C,wCAA9C;AACAH,EAAAA,GAAG,CAACE,MAAJ,CAAW,8BAAX,EAA2C,eAA3C;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeR,GAAG,CAACG,MAAnB,CAAZ;AACA,MAAIM,UAAU,GAAGT,GAAG,CAACG,MAAJ,CAAW,SAAX,CAAjB;;AACA,MAAIM,UAAJ,EAAe;AACb,QAAIC,KAAJ;AACAA,IAAAA,KAAK,GAAEd,QAAQ,CAACe,GAAT,CAAaC,OAAb,CAAqBH,UAArB,EAAiCX,SAAjC,CAAP;AACA,QAAIe,aAAa,GAAGH,KAAK,CAACI,QAAN,CAAelB,QAAQ,CAACmB,GAAT,CAAaC,IAA5B,CAApB,CAHa,CAIb;;AACA,QAAGH,aAAa,IAAI,cAAjB,IAAmCA,aAAa,IAAI,gBAAvD,EAAwE;AACtEX,MAAAA,IAAI;AACL,KAFD,MAGI;AACFD,MAAAA,GAAG,CAACgB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,QAAAA,OAAO,EAAC;AAAT,OAArB;AACD;AACF,GAXD,MAYI;AACFlB,IAAAA,GAAG,CAACgB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,MAAAA,OAAO,EAAC;AAAT,KAArB;AACD;AACF;;AAAA","sourcesContent":["var CryptoJS = require(\"crypto-js\");\r\nconst secretKey=\"secretKey=m@_y-se!cre0t-clo_se@ds2ea@123\";\r\n\r\n// var ciphertext = CryptoJS.AES.encrypt('closedSeaAPI', secretKey).toString();\r\n\r\n// console.log(ciphertext)\r\n\r\nexport function userAuth(req, res, next) {\r\n    res.header(\"Access-Control-Allow-Origin\", \"*\");\r\n    res.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS, PUT, PATCH, DELETE');  \r\n    res.header(\"Access-Control-Allow-Headers\", \"Authorization\");\r\n    console.log(JSON.stringify(req.header))\r\n    var authApiKey = req.header('api-key');\r\n    if (authApiKey){\r\n      let bytes;\r\n      bytes =CryptoJS.AES.decrypt(authApiKey, secretKey);\r\n      let decryptedData = bytes.toString(CryptoJS.enc.Utf8)\r\n      // console.log(decryptedData)\r\n      if(decryptedData == \"closedSeaAPI\" || decryptedData == '\"closedSeaAPI\"'){\r\n        next()\r\n      }\r\n      else{\r\n        res.status(400).json({message:\"You are not authorized person\"})\r\n      }\r\n    } \r\n    else{\r\n      res.status(400).json({message:\"You are not authorized person\"})\r\n    }\r\n  };"],"file":"middleware.js"}